    *

// app main blockfile

// app UI layer
app
    id app
    css
        opacity 0
        transition opacity 0.4s
        width 100%
        height 100%
        margin 0 auto
        box-sizing border-box
        position absolute
        top 0
        left 0

    :ready
        {
            console.log('[block] ready');
        }

    #sign_in_res
        {
            if (sign_in_res.data.token != null) {
                util.cookie('token', `${sign_in_res.data.token}`, '__indefinite__');
            }
            block.data({
                auth_res: {
                    success: sign_in_res.success
                }
            });
        }
    #auth_res
        {
            if (auth_res.success) {
                block.child('login').css('display', 'none');
                block.child('main').css('display', 'block');
                setTimeout(_ => {
                    block.child('main/menu/projects').$().click();
                }, 20);
            } else {
                //console.log('fail');
                block.child('login').css('display', 'table');
                block.child('main').css('display', 'none');
                if (app.ws.api.cookie_login_flag)
                    block.child('login/content/subcontent/error').on('show');
            }
        }

    #new_project_res
        {
            if (new_project_res.success) {
                app.ui.display_modal.new_project_res(`Created project "${new_project_res.data.slug}" (${new_project_res.data.id})`);
            } else {
                app.ui.display_modal.new_project_res(`<span style="color: #a60a0a; opacity: 0.9;">${util.capitalize(new_project_res.message ? new_project_res.message : 'unknown error')}.</span>`);
            }
        }
    #get_projects_res
        {
            if (get_projects_res.success) {
                //console.log(get_projects_res.data.list);
                block.child('main/content/projects').data({
                    project_list: get_projects_res.data.list
                });
            } else {
                app.ui.display_modal.generic_confirm('Load Projects', `Error - ${util.capitalize(get_projects_res.message ? get_projects_res.message : 'unknown error')}`, (result) => {
                    if (result) {
                        setTimeout(_ => {
                            app.ws.api.get_projects();
                        }, 30);
                        return true;
                    }
                });
            }
        }
    #star_project_res
        {
            //console.log(star_project_res.data.id, star_project_res.data.starred);
            block.child('main/content/projects').data({
                star_project: star_project_res.data
            });
        }
    #update_project_res
        {
           var current_project = block.child('main/content/projects/detail').key('project');
           if (current_project && current_project._id == update_project_res.data.id)
               block.child('main/content/projects/detail').on('receive_project_update', update_project_res.data.project);
               block.child('main/content/projects').data({ update_project_local: update_project_res.data.project });
        }
    #delete_project_res
        {
            if (delete_project_res.success === true) {
                block.child('main/content/projects').data({
                    delete_project: delete_project_res.data.id
                });
            }
        }

    div background
        css
            position absolute
            top 0
            left 0
            width 100%
            height 100%
            box-sizing border-box
            margin 0
            padding 0
            //background-image url(img/gear_bg.jpg)
            background-position top right
            background-size auto
            background-repeat repeat
            background-attachment fixed
            opacity 0.05

    div main
        css
            display none
            height 100%
            width 100%
            overflow hidden
        div bar
            css
                box-shadow rgba(50, 50, 50, 0.3) 0px 2px 4px
                width 100%
                position fixed
                left 0
                top 0
                height 72px
                opacity 0.985
                z-index 101
                cursor crosshair
            {
                //block.css("background-color", app.ui.colors.primary);
            }
            block icon
                css
                    width 70px
                    margin-left 33px
                    margin-right 16px
                    float left
                    cursor crosshair
                //class mdc-touch-target-wrapper
                //button button
                    //css
                    //    height 54px
                    //    width 54px
                    //    margin 0 auto
                    //    position relative
                    //class mdc-button mdc-button--touch
                    //span ripple
                    //    class mdc-button__ripple
                    //span touch
                    //    class mdc-button__touch
                block wrapper
                    image image
                        src img/cloud_3_b.png
                        height 54px
                        width 54px
                    css
                        filter invert(1)
            block title
                css
                    width 200px
                    float left
                text text
                    val Dash
                    css
                        font-size 49px
                        margin 0
                        color white
                        display block
                        font-weight 400
                        text-align left
                        margin-bottom 1px
                        cursor crosshair
            block logout
                css
                    width 70px
                    height 100%
                    top 0
                    right 10px
                    position absolute
                div img
                    css
                        height 45px
                        width 45px
                        opacity 1
                        cursor pointer
                        transition opacity 0.1s ease
                        margin 0 auto
                    image power
                        src img/power_w.png
                        height 45px
                        width 45px
                    :mouseover
                        css
                            opacity 0.9
                    :mouseout
                        css
                            opacity 1
                    :click
                        {
                            app.ws.api.logout();
                        }
        div menu
            css
                top 0
                left 0
                width 312px 
                //width 343px
                height 100%
                background-color white
                border-right none
                position fixed
                box-shadow 1.5px 0px 4.5px 1px rgba(10,10,10,0.04)
                padding-top 70px
                box-sizing border-box
            menu-item projects
                val Projects
                icon project_b.svg
                icon_size 26px
                //icon dashboard_l_b.png
                :second_click
                    {
                        var projects_block = block.parent().sibling('content').child('projects');
                        if (projects_block.key('active_view') == 'detail') 
                            projects_block.child('close/close_button').on('click');
                    }
            menu-item applications
                val Applications
                icon api_b.png
                :second_click
                    {
                        var applications_block = block.parent().sibling('content').child('applications');
                        if (applications_block.key('active_view') == 'detail') 
                            applications_block.child('close/close_button').on('click');
                    }
            menu-item resources
                val Resources
                icon board_b.png
                :second_click
                    {
                        var projects_block = block.parent().sibling('content').child('resources');
                        if (projects_block.key('active_view') == 'detail')
                            projects_block.child('close/close_button').on('click');
                    }
            menu-item domains
                val Domains
                icon globe_b.png
                :second_click
                    {
                        var domains_block = block.parent().sibling('content').child('domains');
                        if (domains_block.key('active_view') == 'detail')
                            domains_block.child('close/close_button').on('click');
                    }
            menu-item sitemap
                val Sitemap
                icon tree_b.png
            menu-item ideas
                val Ideas
                icon lightbulb_b.png
        div content
            css
                padding-left 1px
                padding-top 75px
                text-align left
            $padding+ 20
            @query window width != 0
                {
                    var padding_plus = parseInt(block.key('padding+'));
                    block.css('padding-left', (block.sibling('menu').$().width() + padding_plus) + 'px');
                    block.css('padding-right', (5 + padding_plus) + 'px');
                }
            
            div projects
                $active_view content
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            //Block.queries();
                        }, 2);
                        setTimeout(_ => {
                            app.ws.api.get_projects();
                        }, 10);
                    }
                :hide
                    css
                        display none
                #project_list
                    {
                        project_list = project_list.sort(util.sort_compare_newest_first);
                        block.key('project_list', project_list);

                        block.child('content').html('');
                        for (var p in project_list) {
                            var project_block_new = Block('project-item', `project_${project_list[p]._id.toString()}`).data(project_list[p]).key('project_metadata', project_list[p]);
                            block.child('content').add(project_block_new);
                        }
                        if (project_list.length > 2)
                            block.child('content').css('text-align', 'center');
                        else block.child('content').css('text-align', 'left');
                        if (project_list.length == 0) {
                            var msg = 'No projects found.';
                            block.child('content').html(`<div style="margin: 20px auto; text-align: center; padding-top: 2px;"><span class="noItemsMessage">${msg}</span></div>`);
                        }
                        //Block.queries();
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                window.componentHandler.upgradeDom();
                            }, 10);
                        }, 10);
                    }
                #star_project
                    {
                        var ch = block.child(`content/project_${star_project.id}`);
                        if (ch)
                            ch.data({
                                featured: star_project.starred
                            });
                        block.data({
                            update_project_field_local: {
                                id: star_project.id,
                                field: 'featured',
                                val: star_project.starred
                            }
                        });
                        /*
                        var current_project_info = block.child('detail').key('project');
                        if (current_project_info && star_project.id == current_project_info._id) {
                            current_project_info.featured = star_project.starred;
                            block.data({
                                update_project_local: current_project_info
                            });
                        }
                        */
                    }
                #select_project
                    {
                        block.key('active_view', 'detail');
                        block.child('content').css('display', 'none')
                            .sibling('detail').css('display', 'block')
                            .data({ project: select_project })
                        ;
                        block.child('title').data({ select_project_name: `${select_project.name}` });
                        block.child('new_project_button').css('display', 'none');
                        block.child('project_filter').css('display', 'none');
                        block.child('close').on('show');
                        block.child('detail').on('update_grid');
                        setTimeout(_ => {
                            Block.queries();
                        }, 15);
                    }
                :deselect_project
                    {
                        block.key('active_view', 'content');
                        block.child('detail').css('display', 'none')
                            .sibling('content').css('display', 'block')
                        ;
                        block.child('title').on('back');
                        block.child('new_project_button').css('display', 'inline-block');
                        block.child('project_filter').css('display', 'block');
                        block.child('close').on('hide');
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                window.componentHandler.upgradeDom();
                            }, 10);
                        }, 5);
                    }
                #update_project_local
                    {
                        //console.log('update_project_local', update_project_local);
                        var project_list = block.key('project_list');
                        for (var p in project_list) {
                            if (project_list[p]._id == update_project_local._id) {
                                project_list[p] = update_project_local;
                                break;
                            }
                        }
                        block.data({
                            project_list: project_list
                        });
                    }
                #update_project_field_local
                    {
                        //console.log('update_project_field_local', update_project_field_local);
                        var project_list = block.key('project_list');
                        for (var p in project_list) {
                            if (project_list[p]._id == update_project_field_local.id) {
                                project_list[p][update_project_field_local.field] = update_project_field_local.val;
                                break;
                            }
                        }
                        block.data({
                            project_list: project_list
                        });
                    }
                #delete_project
                    {
                        var project_info = block.child('detail').key('project');
                        if (project_info && project_info._id == delete_project) {
                            block.child('close/close_button').on('click');
                            setTimeout(_ => {
                                app.ws.api.get_projects();
                            }, 20);
                        }
                    }
                button new_project_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                        transition opacity 0.2s ease
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                            css
                                font-family Source Sans Pro
                                font-size 24px
                    :click
                        {
                            app.ui.display_modal.new_project();
                        }
                    {
                        //block.css("background-color", app.ui.colors.primary);
                    }
                div project_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Projects
                    #select_project_name
                        {
                            block.child('text').html(`Projects&nbsp;&nbsp;/&nbsp;&nbsp;<span class='b600'>${select_project_name}</span>`);
                        }
                    :back
                        {
                            block.child('text').html('').data('Projects');
                            event.stopPropagation();
                        }
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.7
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                block close
                    css
                        height 40px
                        width 40px
                        position absolute
                        top 29px
                        right 12px
                        display none
                        pointer-events none
                        z-index 50
                    :hide
                        css 
                            display none
                            pointer-events none
                        {
                            event.stopPropagation();
                        }
                    :show
                        css
                            display table
                            pointer-events auto
                        {
                            event.stopPropagation();
                        }
                    button close_button
                        css
                            width 24px
                            heigth 24px
                            border none
                            background-color rgba(255, 255, 255, 0)
                            outline none
                            opacity 0.32
                            cursor pointer
                            border-radius 100%
                            transition opacity 0.2s ease
                        :mouseover
                            css
                                opacity 0.68
                        :mouseout
                            css
                                opacity 0.32
                        :click
                            {
                                block.parent().sibling('detail').on('hide_editors');
                                setTimeout(_ => {
                                    block.parent(1).on('deselect_project');
                                }, 10);
                            }
                        image x
                            src /img/x_b.png
                            height 24px
                            width 24px
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                        }
                    :status_update
                        {
                            var children = block.children();
                            for (var c in children) {
                                children[c].on('status_update');
                            }
                            event.stopPropagation();
                        }
                div detail
                    css
                        width 100%
                        height auto
                        text-align left
                        padding-top 0
                        padding-left 2px
                        padding-right 0
                        box-sizing border-box
                        display none
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    $reload_grid yes
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                            if (block.key('reload_grid') === 'yes') {
                                block.key('reload_grid', 'no');
                                block.on('update_grid');
                                setTimeout(_ => {
                                    block.key('reload_grid', 'yes');
                                }, 100);
                            }
                        }
                    :update_grid
                        {
                            //console.log('update_grid');
                            // set up masonry grid
                            /*
                            $('div.masonry-grid-container').masonry({
                                // options
                                itemSelector: 'div.masonry-grid-container div.dashboard_detail_section',
                                columnWidth: 455
                            });
                            */
                            event.stopPropagation();
                        }
                    #project
                        {
                            block.key('project', project);
                            block.data({
                                name: project.name,
                                slug: project.slug,
                                tagline: project.tagline,
                                description: project.description,
                                public: project.public,
                                featured: project.featured,
                                link: project.link,
                                img: project.img,
                                img_invert: project.img_invert,
                                repo: project.repo,
                                docs: project.docs,
                                applications: project.applications,
                                tech: project.tech,
                            });
                        }
                    #name
                        {
                            block.child('subcontent/project_info/name/value/text').html('').data(`${name}`);
                            block.child('subcontent/project_info/name/value_editor').attribute('value', `${name}`);
                            block.sibling('title').data({
                                select_project_name: `${name}`
                            });
                        }
                    #slug
                        {
                            block.child('subcontent/project_info/slug/value/text').html('').data(`${slug}`);
                            block.child('subcontent/project_info/slug/value_editor').attribute('value', `${slug}`);
                        }
                    #tagline
                        {
                            var tagline_alt = tagline;
                            if (tagline_alt == '') tagline_alt = '<span class="text_placeholder">Lorem ipsum dolor sit amet</span>';
                            block.child('subcontent/project_info/tagline/value/text').html(`${tagline_alt}`);
                            block.child('subcontent/project_info/tagline/value_editor').attribute('value', `${tagline}`);
                        }
                    #description
                        {
                            var description_alt = description;
                            if (description_alt == '') description_alt = '<span class="text_placeholder">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span>';
                            block.child('subcontent/project_info/description/value/text').html(`${description_alt}`);
                            block.child('subcontent/project_info/description/value_editor').attribute('value', `${description}`);
                        }
                    #public
                        {
                            block.child('subcontent/project_info/public/value/switch').data({
                                val: public === true ? 'on' : 'off'
                            });
                        }
                    #featured
                        {
                            block.child('subcontent/project_info/featured/value/switch').data({
                                val: featured === true ? 'on' : 'off'
                            });
                        }
                    #link
                        {
                            var link_alt = link;
                            var link_alt_alt = link_alt;
                            if (link_alt == '') {
                                link_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">offline</span>';
                                link_alt_alt = '#';
                                block.child('subcontent/project_info/link/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_info/link/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (link_alt.length > length_limit) link_alt = link_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_info/link/value/text').html(`${link_alt}`).attribute('href', `${link_alt_alt}`);
                            block.child('subcontent/project_info/link/value_editor').attribute('value', `${link}`); 
                        }
                    #img
                        {
                            block.child('subcontent/project_info/image').data({
                                update: img ? (`${img}`).trim() : ''
                            });
                        }
                    #img_invert
                        {
                            block.child('subcontent/project_info/image').data({
                                update_invert: img_invert
                            });
                        }
                    #repo
                        {
                            //console.log(repo);
                            var repo_alt = repo;
                            var repo_alt_alt = repo_alt;
                            if (repo_alt == '') {
                                repo_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                repo_alt_alt = '#';
                                block.child('subcontent/project_code/repo/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_code/repo/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (repo_alt.length > length_limit) repo_alt = repo_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_code/repo/value/text').html(`${repo_alt}`).attribute('href', `${repo_alt_alt}`);
                            block.child('subcontent/project_code/repo/value_editor').attribute('value', `${repo}`); 
                        }
                    #docs
                        {
                            var docs_alt = docs;
                            var docs_alt_alt = docs_alt;
                            if (docs_alt == '') {
                                docs_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                docs_alt_alt = '#';
                                block.child('subcontent/project_code/docs/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_code/docs/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (docs_alt.length > length_limit) docs_alt = docs_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_code/docs/value/text').html(`${docs_alt}`).attribute('href', `${docs_alt_alt}`);
                            block.child('subcontent/project_code/docs/value_editor').attribute('value', `${docs}`); 
                        }
                    #applications
                        {
                            //console.log('received project applications', applications);
                            block.child('subcontent/project_apps/list').data({
                                applications: applications
                            });
                        }
                    #tech
                        {
                            var project_info = block.key('project');
                            var tech_primary_block = block.child('subcontent/project_code/tech_primary');
                            var tech_secondary_block = block.child('subcontent/project_code/tech_secondary');
                            var tech_languages_block = block.child('subcontent/project_code/tech_language');

                            // primary
                            if (tech.primary.length > 0 && project_info != null) {
                                tech_primary_block.child('value').css('display', 'table');
                                tech_primary_block.child('value/text').html('');
                                for (var t in tech.primary) {
                                    tech_primary_block.child('value/text').add(Block('div', `tech_primary_${t}`)
                                        .key('tech_item', tech.primary[t])
                                        .key('index', t)
                                        .add(Block('text', 1)
                                            .css({
                                                position: 'relative',
                                                width: 'auto',
                                                fontSize: '23px',
                                            })
                                            .data(`${tech.primary[t]}`)
                                            .add(Block('image', 'img')
                                                .class('tech_delete_button')
                                                .css('display', 'none')
                                                .data({
                                                    src: '/img/x_b.png',
                                                    height: '20px',
                                                    width: '20px',
                                                })
                                                .on('click', (e, b, d) => {
                                                    b.parent(1).on('activate');
                                                    e.stopPropagation();
                                                })
                                            )
                                        )
                                        .on('mouseover', (e, b, d) => {
                                            b.child('text/img').css('display', 'block');
                                        })
                                        .on('mouseout', (e, b, d) => {
                                            b.child('text/img').css('display', 'none');
                                        })
                                        .on('activate', (e, b, d) => {
                                            setTimeout(_ => {
                                                app.ws.api.remove_project_tech(block.key('project')._id, b.key('tech_item'), 'primary');
                                            }, 20);
                                            e.stopPropagation();
                                        })
                                    );
                                }
                            } else if (tech.secondary.length > 0) {
                                tech_primary_block.child('value').css('display', 'none');
                            } else {
                                //tech_primary_block.child('value').css('display', 'table');
                                //tech_primary_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;">No technology found.</span>');
                                
                                tech_primary_block.child('value').css('display', 'none');
                                tech_primary_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;"></span>');
                            }

                            // secondary
                            if (tech.secondary.length > 0 && project_info != null) {
                                tech_secondary_block.child('value/text').css('display', 'block').html('');
                                tech_secondary_block.css('display', 'block');
                                tech_primary_block.css('margin-bottom', '5px');
                                for (var t in tech.secondary) {
                                    tech_secondary_block.child('value/text').add(Block('div', `tech_secondary_${t}`)
                                        .key('tech_item', tech.secondary[t])
                                        .key('index', t)
                                        .add(Block('text', 1)
                                            .css({
                                                position: 'relative',
                                                width: 'auto',
                                                fontSize: '18px'
                                            })
                                            .data(`${tech.secondary[t]}`)
                                            .add(Block('image', 'img')
                                                .class('tech_delete_button_small')
                                                .css('display', 'none')
                                                .data({
                                                    src: '/img/x_b.png',
                                                    height: '20px',
                                                    width: '20px',
                                                })
                                                .on('click', (e, b, d) => {
                                                    b.parent(1).on('activate');
                                                    e.stopPropagation();
                                                })
                                            )
                                        )
                                        .on('mouseover', (e, b, d) => {
                                            b.child('text/img').css('display', 'block');
                                        })
                                        .on('mouseout', (e, b, d) => {
                                            b.child('text/img').css('display', 'none');
                                        })
                                        .on('activate', (e, b, d) => {
                                            setTimeout(_ => {
                                                app.ws.api.remove_project_tech(block.key('project')._id, b.key('tech_item'), 'secondary');
                                            }, 20);
                                            e.stopPropagation();
                                        })
                                    );
                                }
                            } else {
                                tech_secondary_block.child('value/text').css('display', 'none');
                                tech_secondary_block.css('display', 'none');
                                tech_primary_block.css('margin-bottom', '10px');
                            }

                            // languages
                            if (tech.languages.length > 0 && project_info != null) {
                                tech_languages_block.child('value').css('display', 'table');
                                tech_languages_block.child('value/text').html('');
                                for (var t in tech.languages) {
                                    tech_languages_block.child('value/text').add(Block('div', `tech_language_${t}`)
                                        .key('language_item', tech.languages[t])
                                        .key('index', t)
                                        .add(Block('text', 1)
                                            .css({
                                                position: 'relative',
                                                width: 'auto',
                                                fontSize: '23px',
                                            })
                                            .data(`${tech.languages[t]}`)
                                            .add(Block('image', 'img')
                                                .class('tech_delete_button')
                                                .css('display', 'none')
                                                .data({
                                                    src: '/img/x_b.png',
                                                    height: '20px',
                                                    width: '20px',
                                                })
                                                .on('click', (e, b, d) => {
                                                    b.parent(1).on('activate');
                                                    e.stopPropagation();
                                                })
                                            )
                                        )
                                        .on('mouseover', (e, b, d) => {
                                            b.child('text/img').css('display', 'block');
                                        })
                                        .on('mouseout', (e, b, d) => {
                                            b.child('text/img').css('display', 'none');
                                        })
                                        .on('activate', (e, b, d) => {
                                            setTimeout(_ => {
                                                app.ws.api.remove_project_tech(block.key('project')._id, b.key('language_item'), 'languages');
                                            }, 20);
                                            e.stopPropagation();
                                        })
                                    );
                                }
                            } else {
                                //tech_languages_block.child('value').css('display', 'table');
                                //tech_languages_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;">No languages found.</span>');
                                tech_languages_block.child('value').css('display', 'none');
                                tech_languages_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;"></span>');
                            }
                        }
                    :hide_editors
                        {
                            //setTimeout(_ => {
                                block.child('subcontent/project_info/name/value_editor').on('hide');
                                block.child('subcontent/project_info/slug/value_editor').on('hide');
                                block.child('subcontent/project_info/tagline/value_editor').on('hide');
                                block.child('subcontent/project_info/description/value_editor').on('hide');
                                block.child('subcontent/project_info/link/value_editor').on('hide');
                                block.child('subcontent/project_code/repo/value_editor').on('hide');
                                block.child('subcontent/project_code/docs/value_editor').on('hide');
                                block.child('subcontent/project_code/add_tech_item/value_editor').on('refresh');
                                block.child('subcontent/project_info/more_menu').on('hide');
                            //}, 200);
                        }
                    :receive_project_update
                        {
                            var old_data = block.key('project');
                            var new_data = data;
                            if (old_data.name != new_data.name) {
                                block.data({ name: new_data.name, });
                                block.child('subcontent/project_info/name/value_editor').on('hide');
                            }
                            if (old_data.slug != new_data.slug) {
                                block.data({ slug: new_data.slug, });
                                block.child('subcontent/project_info/slug/value_editor').on('hide');
                            }
                            if (old_data.tagline != new_data.tagline) {
                                block.data({ tagline: new_data.tagline, });
                                block.child('subcontent/project_info/tagline/value_editor').on('hide');
                            }
                            if (old_data.description != new_data.description) {
                                block.data({ description: new_data.description, });
                                block.child('subcontent/project_info/description/value_editor').on('hide');
                            }
                            if (old_data.public != new_data.public) {
                                block.data({ public: new_data.public });
                            }
                            if (old_data.featured != new_data.featured) {
                                block.data({ featured: new_data.featured });
                            }
                            if (old_data.link != new_data.link) {
                                block.data({ link: new_data.link, });
                                block.child('subcontent/project_info/link/value_editor').on('hide');
                            }
                            if (old_data.img != new_data.img) {
                                block.data({ img: new_data.img, });
                            }
                            if (old_data.img_invert != new_data.img_invert) {
                                block.data({ img_invert: new_data.img_invert, });
                            }
                            if (old_data.repo != new_data.repo) {
                                block.data({ repo: new_data.repo, });
                                block.child('subcontent/project_code/repo/value_editor').on('hide');
                            }
                            if (old_data.docs != new_data.docs) {
                                block.data({ docs: new_data.docs, });
                                block.child('subcontent/project_code/docs/value_editor').on('hide');
                            }
                            var update_tech = false;
                            if (old_data.tech.primary.length != new_data.tech.primary.length) {
                                update_tech = true;
                                block.child('subcontent/project_code/add_tech_item/value_editor').on('refresh');
                            }
                            if (old_data.tech.secondary.length != new_data.tech.secondary.length) {
                                update_tech = true;
                                block.child('subcontent/project_code/add_tech_item/value_editor').on('refresh');
                            }
                            if (old_data.tech.languages.length != new_data.tech.languages.length) {
                                update_tech = true;
                                block.child('subcontent/project_code/add_language_item/value_editor').on('refresh');
                            }
                            if (update_tech) {
                                block.data({ tech: new_data.tech });
                            }
                            block.data({ applications: new_data.applications });
                            block.key('project', new_data);
                        }
                    :send_project_update
                        {
                            app.ws.api.update_project(block.key('project')._id, data);
                            event.stopPropagation();
                        }
                    :delete_project
                        {
                            //console.log('delete_project');
                            var project_info = block.key('project');
                            if (project_info) {
                                app.ui.display_modal.generic_confirm("Delete Project", `Permanently delete project "${project_info.name}"?`, (result) => {
                                    if (result) {
                                        var confirm = window.confirm(`This action is not reversible — are you sure about deleting project "${project_info.name}"?`);
                                        if (confirm) {
                                            setTimeout(_ => {
                                                app.ws.api.delete_project(project_info._id);
                                            }, 30);
                                        }
                                        return true;
                                    }
                                });
                            }
                            event.stopPropagation();
                        }
                    :add_primary_tech
                        {
                            app.ws.api.update_project_tech(block.key('project')._id, data.new_tech, 'primary');
                            event.stopPropagation();
                        }
                    :add_secondary_tech
                        {
                            app.ws.api.update_project_tech(block.key('project')._id, data.new_tech, 'secondary');
                            event.stopPropagation();
                        }
                    :add_language_tech
                        {
                            app.ws.api.update_project_tech(block.key('project')._id, data.new_language, 'languages');
                            event.stopPropagation();
                        }
                    div subcontent
                        class masonry-grid-container
                        css
                            padding 1px 1px
                        div project_info
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Project
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/project_b.svg
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div name
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Name
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Project Zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('project').name);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').name;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Project Zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        name: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div slug
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Identifier
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val project-zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').slug;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder project-zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        slug: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div tagline
                                class value_edge
                                text label
                                    val Tagline
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    text text
                                        val Lorem ipsum dolor sit amet
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').tagline;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Lorem ipsum dolor sit amet
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        tagline: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div description
                                class value_edge
                                text label
                                    val Description
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').description;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        description: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div public
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Visibility
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Public
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '55px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Public' : 'Private') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    public: value
                                                });
                                                event.stopPropagation();
                                            }
                            div featured
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Featured
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Promoted
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '75px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Promoted' : 'Standard') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    featured: value
                                                });
                                                event.stopPropagation();
                                            }
                            div link
                                class value_edge
                                text label
                                    val Demo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://projectzero.anuv.me
                                        href https://projectzero.anuv.me
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').link;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        letter-spacing normal
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        link: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            block image
                                css
                                    height 130px
                                    width 130px
                                    position absolute
                                    top 80px
                                    right 40px
                                    border-radius 7px
                                    opacity 0.99
                                    transition opacity 0.2s ease
                                    cursor pointer
                                    -webkit-box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                #update
                                    {
                                        block.key('img_path', update);
                                        var data = {
                                            src: '/img/gear_bg.jpg',
                                            css: {
                                                opacity: '0.75'
                                            }
                                        };
                                        if (update && update.trim() != '') {
                                            //console.log(update);
                                            data.src = update;
                                            data.css.opacity = '0.97';
                                        }
                                        block.child('img').data(data);
                                    }
                                #update_invert
                                    {
                                        block.key('img_invert', update_invert);
                                        block.child('edit').css({
                                            'filter': update_invert ? 'invert()' : 'none'
                                        });
                                        block.key('edit_opacity', update_invert ? '1' : '0.6');
                                    }
                                $edit_opacity 0.95
                                :mouseover
                                    css
                                        opacity 0.94
                                    {
                                        block.child('edit').css('opacity', block.key('edit_opacity'));
                                    }
                                :mouseout
                                    css
                                        opacity 0.99
                                    edit
                                        css
                                            opacity 0
                                :click
                                    {
                                        var url = '';
                                        if (block.key('img_path'))
                                            url = block.key('img_path');
                                        app.ui.display_modal.edit_project_image(block.parent(2).key('project')._id.toString(), url, block.key('img_invert'));
                                    }
                                image img
                                    src /img/gear_bg.jpg
                                    height 130px
                                    width 130px
                                    css
                                        border-radius 7px
                                        position absolute
                                        top 0
                                        left 0
                                        opacity 0.9
                                image edit
                                    src /img/edit_b.png
                                    height 25px
                                    width 25px
                                    css
                                        margin 0 auto
                                        position relative
                                        z-index 100
                                        opacity 0
                                        transition opacity 0.15s ease
                            block more_menu_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 22px
                                button more_menu_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 33px
                                        width 33px
                                        margin 0 auto
                                        opacity 0.65
                                        padding 0
                                        display block
                                    image img
                                        src /img/more_b.png
                                        height 33px
                                        width 33px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            block.parent().sibling('more_menu').on('toggle');
                                        }
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.65
                            div more_menu
                                $showing no
                                :toggle
                                    {
                                        if (block.key('showing') === 'yes') {
                                            block.on('hide');
                                        } else {
                                            block.on('show');
                                        }
                                    }
                                :show
                                    {
                                        block.key('showing', 'yes');
                                        block.css({ display: 'block' });
                                        event.stopPropagation();
                                    }
                                :hide
                                    {
                                        block.key('showing', 'no');
                                        block.css({ display: 'none' });
                                        event.stopPropagation();
                                    }
                                css
                                    position absolute
                                    height 90px
                                    width 85px
                                    top 0
                                    right -85px
                                    border-radius 4px
                                    border 1px solid #efefef
                                    background-color white
                                    display none
                                    -webkit-box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    font-size 12.5px
                                    letter-spacing 0.8px
                                    opacity 0.98
                                    z-index 200
                                div menu-item-1
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                        border-radius 4px 4px 0 0
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Lorem
                                        :click
                                            {
                                                console.log('Lorem');
                                            }
                                div menu-item-2
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Ipsum
                                        :click
                                            {
                                                console.log('Ipsum');
                                            }
                                div menu-item-3
                                    css
                                        height 30px
                                        border-bottom none
                                        box-sizing border-box
                                        border-radius 0 0 4px 4px
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                            color rgb(209, 36, 36)
                                        html Delete
                                        :click
                                            {
                                                //console.log('Delete');
                                                block.parent(4).on('delete_project');
                                            }
                        div project_code
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Code
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/code_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div repo
                                class value_edge
                                text label
                                    val Repository
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').repo;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://github.com/u/projectzero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        repo: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div tech_primary
                                class value_edge
                                css
                                    margin-bottom 1px
                                text label
                                    val Technology
                                    class label_desc
                                    css
                                        margin-bottom 0px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        html No technology found.
                                        class value_text
                                        css
                                            font-size 23px
                                            line-height 31px
                                            letter-spacing 1.2px
                            div tech_secondary
                                class value_edge
                                css
                                    margin-bottom 20px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        html No secondary technology found.
                                        class value_text
                                        css
                                            font-size 18px
                                            line-height 21px
                                            letter-spacing 1.2px
                            div add_tech_item
                                class value_edge
                                css
                                    margin-bottom 20px
                                    position relative
                                text label
                                    val Add Tech
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                        display none
                                div primary
                                    css
                                        position absolute
                                        right 0
                                        top 0
                                        height 100%
                                        width 40%
                                        //padding-top 25px
                                    input check
                                        type checkbox
                                        name tech_primary_check
                                        value primary
                                        checked checked
                                        css
                                            position relative
                                            margin-left 18px
                                            cursor pointer
                                            top 2px
                                        :input
                                            {
                                                block.parent().sibling('value_editor').key('section', (block.node().checked ? 'primary' : 'secondary'));
                                            }
                                    label label
                                        for tech_primary_check
                                        html Primary
                                        css
                                            padding-left 6px
                                input value_editor
                                    class value_editor
                                    placeholder Tensorflow, Arduino, ...
                                    $section primary
                                    css
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        //width 95%
                                        width 60%
                                        font-size 16px
                                        letter-spacing 1.2px
                                    :hide
                                        {
                                            block.css('display', 'none'); //.sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :refresh
                                        {
                                            block.node().value = '';
                                            block.node().blur();
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var section = block.key('section');
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on(`add_${section}_tech`, {
                                                        new_tech: value
                                                    });
                                                }
                                                //setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('refresh');
                                            }
                                        }
                            div tech_language
                                class value_edge
                                css
                                    margin-bottom 8px
                                text label
                                    val Language
                                    class label_desc
                                    css
                                        margin-bottom 0px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        html No languages found.
                                        class value_text
                                        css
                                            font-size 23px
                                            line-height 31px
                                            letter-spacing 1.2px
                            div add_language_item
                                class value_edge
                                css
                                    margin-bottom 20px
                                    position relative
                                text label
                                    val Add Language
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                        display none
                                input value_editor
                                    class value_editor
                                    placeholder Python, JavaScript, C++, ...
                                    css
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        //width 95%
                                        width 60%
                                        font-size 16px
                                        letter-spacing 1.2px
                                    :hide
                                        {
                                            block.css('display', 'none'); //.sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :refresh
                                        {
                                            block.node().value = '';
                                            block.node().blur();
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var section = block.key('section');
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on(`add_language_tech`, {
                                                        new_language: value
                                                    });
                                                }
                                                //setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('refresh');
                                            }
                                        }
                            div docs
                                class value_edge
                                text label
                                    val Documentation
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://projectzero.anuv.me/docs
                                        href https://projectzero.anuv.me/docs
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').docs;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me/docs
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        docs: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            div end_spacer_again
                                css
                                    height 7px
                        div project_apps
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Applications
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/api_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div associate
                                css
                                    position absolute
                                    top 24px
                                    right 25px
                                    width 40px
                                    height 40px
                                block plus
                                    css
                                        opacity 0.6
                                        transition opacity 0.2s ease
                                    :mouseover
                                        css
                                            opacity 0.9
                                    :mouseout
                                        css
                                            opacity 0.6
                                    image image
                                        src /img/add_b.png
                                        height 30px
                                        width 30px
                                        css
                                            cursor pointer
                                        :click
                                            {

                                                var project = app.ui.block.child('main/content/projects/detail').key('project');
                                                if (project) {
                                                    setTimeout(_ => {
                                                        app.ws.api.get_applications(null, project._id);
                                                    }, 10);
                                                }
                                                event.stopPropagation();
                                            }
                            div list
                                css
                                    //background-color red
                                    width 100%
                                    max-height 250px
                                    height auto
                                    min-height 45px
                                    overflow-x none
                                    overflow-y auto
                                #manage
                                    {
                                        setTimeout(_ => {
                                            app.ws.api.get_applications(manage);
                                        }, 30);
                                    }
                                #del
                                    {
                                        app.ui.display_modal.generic_confirm("Update Project", `Deassociate app "${del.app_name}" from this project?`, (result) => {
                                            if (result) {
                                                setTimeout(_ => {
                                                    app.ws.api.deassociate_project_app(block.parent(2).key('project')._id, del.app_id);
                                                }, 10);
                                                return true;
                                            }
                                        });
                                    }
                                #link
                                    {
                                        setTimeout(_ => {
                                            app.ws.api.link_project_demo(block.parent(2).key('project')._id, link);
                                        }, 10);
                                    }
                                #application_details
                                    {
                                        var children = block.children();
                                        for (var c in children) {
                                            for (var a in application_details) {
                                                var application_detail = application_details[a];
                                                if (application_detail._id == children[c].key('id')) {
                                                    children[c].data(application_detail)
                                                }
                                            }
                                        }
                                    }
                                #applications
                                    {
                                        if (applications == undefined || !applications)
                                            applications = [];
                                        //console.log(applications);
                                        if (applications.length <= 0) {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'center',
                                                    paddingTop: '15px',
                                                    paddingBottom: '10px',
                                                    minHeight: '45px',
                                                    borderTop: 'none',
                                                })
                                                .add(Block('text', 1)
                                                    .html('No applications associated with project.')
                                                    .css({
                                                        letterSpacing: '1.3px',
                                                        fontSize: '16px',
                                                        color: '#333',
                                                        fontStyle: 'italic',
                                                    })
                                                )
                                            ;
                                        } else {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'left',
                                                    paddingTop: '0',
                                                    paddingBottom: '0',
                                                    minHeight: '105px',
                                                    borderTop: '1px solid #f6f6f6',
                                                })
                                            ;
                                            var first = true;
                                            for (var a in applications) {
                                                var application = applications[a];
                                                block.add(Block('project-application-list-item', `project_app_${application}`)
                                                    .data({
                                                        _id: application,
                                                        first: first
                                                    })
                                                );
                                                first = false;
                                            }
                                        }
                                        block.parent(2).on('update_grid');
                                        setTimeout(_ => {
                                            Block.queries();
                                        }, 10);
                                        setTimeout(_ => {
                                            app.ws.api.get_applications();
                                        }, 10);
                                    }
                            div end_spacer
                                css
                                    height 40px
            